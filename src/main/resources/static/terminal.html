<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>xterm í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css" />
    <style>
        body { margin: 0; background: #1e1e1e; }
        #terminal { height: 100vh; width: 100vw; }
    </style>
</head>
<body>
<div id="terminal"></div>

<script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>
<script>
    // í„°ë¯¸ë„ ê°ì²´ ì´ˆê¸°í™”
    const term = new Terminal({
        cursorBlink: true,
        fontSize: 14,
        theme: {
            background: '#1e1e1e',
            foreground: '#ffffff'
        }
    });
    term.open(document.getElementById('terminal'));

    // ğŸ‘‰ ì—¬ê¸°ì— ë„ˆì˜ ì‹¤ì œ ì»¨í…Œì´ë„ˆ ID ë„£ê¸°
    const containerId = "79b8e31647376ed0e936f44796723a1049c3d6e87b95bc6eafbc7774900bf1e1";

    // WebSocket ì—°ê²°
    const socket = new WebSocket(`ws://localhost:8080/ws/terminal/${containerId}`);

    // ì„œë²„ì—ì„œ ì¶œë ¥ëœ ê²°ê³¼ í„°ë¯¸ë„ì— ì¶œë ¥
    socket.onmessage = (e) => {
        console.log("ğŸ“¥ ì„œë²„ ì‘ë‹µ:", e.data); // << ì—¬ê¸°ì—ì„œ hi ì¶œë ¥ì´ ë³´ì´ëŠ”ì§€ í™•ì¸
        term.write(e.data);
    };

    // ì‚¬ìš©ìê°€ í„°ë¯¸ë„ì— ì…ë ¥í•œ ê°’ ì„œë²„ë¡œ ì „ì†¡
    // âœ… ì‚¬ìš©ì ì…ë ¥ â†’ ì„œë²„ + í™”ë©´ echo
    term.onData(data => {
        socket.send(data);
        if (data === '\r') {
            term.write('\r\n');  // ì»¤ì„œë¥¼ ë‹¤ìŒ ì¤„ë¡œ ë‚´ë¦¼
        } else {
            term.write(data);
        }
    });

    socket.onopen = () => {
        term.writeln("âœ… ì—°ê²° ì„±ê³µ! ì»¨í…Œì´ë„ˆì™€ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.");
    };

    socket.onerror = (e) => {
        term.writeln("âŒ ì—°ê²° ì‹¤íŒ¨: " + e.message);
    };

    socket.onclose = () => {
        term.writeln("ğŸ”Œ ì—°ê²°ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
    };
</script>
</body>
</html>
